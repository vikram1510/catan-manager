(this["webpackJsonpcatan-fe"]=this["webpackJsonpcatan-fe"]||[]).push([[0],{41:function(n,e,t){n.exports=t(69)},46:function(n,e,t){},69:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),o=t(31),c=t.n(o),u=(t(46),t(1)),i=t(2),l=t(38),s=t(11),p=t(5),d=t.n(p),f=t(10),m=t(4),g=t(12),h=t(13),b={brick:"/NewBricksCatan.png",sheep:"/NewSheepCatan.png",wood:"/NewTreeCatan.png",grain:"/NewWheatCatan.png",rock:"/NewRocksCatan.png",bg:"/bg.jpg",logo:"/catanlogo.png"};function v(){var n=Object(u.a)(["\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 16%;\n  margin-right: 4%;\n\n  :last-child {\n    margin-right: 0px\n  }\n\n  .fa-plus-square {\n    color:green;\n    opacity: ","\n  }\n\n  .fa-minus-square {\n    color:#d82828;\n    opacity: ","\n  }\n\n  .resource-image-wrapper{\n    width: 50px;\n    height: 50px;\n\n\n    /* padding: 10px; */\n    img {\n      height: auto;\n      width: 100%;\n    }\n  }\n\n  p {\n    font-size: 1.2rem\n  }\n\n"]);return v=function(){return n},n}var x=i.a.div(v(),(function(n){var e=n.watchAmount;return null!==e&&e<=0?"30%":"100%"}),(function(n){return n.amount<=0?"30%":"100%"})),y=function(n){var e=n.resourceName,t=n.amount,a=n.changeResourceAmount,o=n.watchAmount,c=function(n){null===o?-1===n?t>0&&a(Object(h.a)({},e,t-1)):1===n&&a(Object(h.a)({},e,t+1)):o>=0&&-1===n?t>0&&a(Object(h.a)({},e,t-1)):o>0&&1===n&&a(Object(h.a)({},e,t+1))};return r.a.createElement(x,{amount:t,watchAmount:o},r.a.createElement("i",{className:"fas fa-plus-square",onClick:function(){return c(1)}}),r.a.createElement("div",{className:"resource-image-wrapper"},r.a.createElement("img",{src:b[e],alt:e})),r.a.createElement("i",{className:"fas fa-minus-square",onClick:function(){return c(-1)}}),r.a.createElement("p",null,t))},E=["brick","wood","sheep","grain","rock"];function w(){var n=Object(u.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return w=function(){return n},n}var j=i.a.div(w()),O=function(n){var e=n.amounts,t=n.setAmounts,a=n.watchAmounts,o=void 0===a?null:a,c=function(n){t(Object(g.a)({},e,{},n))};return console.log("jkhkjsd",o),r.a.createElement(j,{className:"amount-setter-wrapper"},E.map((function(n){return r.a.createElement(y,{key:n,resourceName:n,amount:e[n],changeResourceAmount:c,watchAmount:o&&o[n]})})))};function k(){var n=Object(u.a)(["\nwidth: 30px;\nheight: 30px;\npadding: 0px 4px;\n\n  img {\n    height: auto;\n    width: 100%;\n  }\n"]);return k=function(){return n},n}function C(){var n=Object(u.a)(["\ndisplay: flex;\nwidth:80%;\nfont-weight:800;\nflex-grow: 7;\n"]);return C=function(){return n},n}function N(){var n=Object(u.a)(["\npadding: 0px 10px 4px;\nborder-radius: 5px;\nborder: 1px solid lightgray;\nbackground-color: white;\nfont-weight: 500;\nmargin-bottom: 4px;\nmargin-top: 2px;\n"]);return N=function(){return n},n}function S(){var n=Object(u.a)(["\ndisplay: flex;\njustify-content: space-between;\n\ni {\n  margin-top: 5px;\n}\n"]);return S=function(){return n},n}function A(){var n=Object(u.a)(["\n  padding: 2px 4px;\n  width: 30px;\n  background-color: ",";\n  text-align: center;\n  font-size: 0.9rem;\n  margin: auto;\n  border: 1px solid ",";\n  opacity: ",";\n  color: white;\n  flex-grow: 2;\n"]);return A=function(){return n},n}function P(){var n=Object(u.a)(["\nfont-weight:700;\n\nhr {\n margin: 0.2rem;\n}\n"]);return P=function(){return n},n}var T=[{itemName:"Road",resources:["brick","wood"]},{itemName:"Settlement",resources:["brick","wood","sheep","grain"]},{itemName:"City",resources:["grain","grain","rock","rock","rock"]},{itemName:"Development Card",resources:["sheep","grain","rock"]}],_=function(n,e){var t=B(n);return n.every((function(n){return e[n]>=t[n]}))},B=function(n){return n.reduce((function(n,e){return e in n||(n[e]=0),n[e]++,n}),{})},I=function(n,e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{onClick:function(){return e(!1)}},r.a.createElement("span",null,""),r.a.createElement("i",{style:{margin:"right"},className:"fas fa-chevron-up"})),n.map((function(n){return r.a.createElement(R,{key:n.name},r.a.createElement("p",null,n.itemName),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(q,null,n.resources.map((function(n,e){return r.a.createElement(J,{key:e},r.a.createElement("img",{src:b[n],alt:n}))}))),r.a.createElement(L,{canBuy:n.canBuy,onClick:function(){return t(n.itemName)}},"Buy")),r.a.createElement("hr",null))})))},D=function(n){var e=n.setShowCard;return r.a.createElement(z,{onClick:function(){return e(!0)}},r.a.createElement("span",{style:{marginTop:"1px"}},"Buy Card"),r.a.createElement("i",{style:{margin:"right"},className:"fas fa-chevron-down"}))},R=i.a.div(P()),L=i.a.div(A(),(function(n){return n.canBuy,"#50b350"}),(function(n){return n.canBuy,"#50b350"}),(function(n){return n.canBuy?"100%":"30%"})),z=i.a.div(S()),W=i.a.div(N()),q=i.a.div(C()),J=i.a.div(k()),K=function(n){var e=n.amounts,t=n.setAmounts,o=Object(a.useState)(!1),c=Object(m.a)(o,2),u=c[0],i=c[1];return T.forEach((function(n){n.canBuy=_(n.resources,e)})),r.a.createElement(W,null,u?I(T,i,(function(n){var a=T.find((function(e){return e.itemName===n}));if(null===a||void 0===a?void 0:a.canBuy){var r=B(a.resources),o={};Object.entries(r).forEach((function(n){var t=Object(m.a)(n,2),a=t[0],r=t[1];o[a]=e[a]-r})),t(Object(g.a)({},e,{},o))}})):D({setShowCard:i}))},U=t(35),H=t.n(U);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})),console.log("production"),console.log("hardcoded baseurl for now to : https://api-catan.herokuapp.com");var F=H.a.create({baseURL:"http://localhost:3030"}),V={getAllPlayers:function(){return F.get("/players").then((function(n){return n.data})).catch((function(n){return console.log("Error in getting data",n.response.data)}))},getPlayerByName:function(n){return F.get("/players?name="+n).then((function(n){var e;if(1===n.data.length)return null!==(e=n.data[0])&&void 0!==e?e:void 0})).catch((function(e){return console.log("Error in getting player by name "+n,e.response.data)}))},getPlayerByID:function(n){return F.get("/players/"+n).then((function(e){if(e.data)return e.data;console.log("Player with id: "+n+" does not exist")})).catch((function(e){return console.log("Error in getting player by id "+n,e)}))},createPlayer:function(n){return F.post("/players/",{name:n}).then((function(n){return n.data._id})).catch((function(e){return console.log("Error in creating player: "+n,e.response.data)}))},deletePlayer:function(n){F.delete("/players/"+n).then((function(e){return console.log("Successfully deleted player: "+n)})).catch((function(n){return console.log("Error in deleting player",n.response.data)}))},updatePlayer:function(n,e){return F.put("/players/"+n,e).then((function(n){return n.data})).catch((function(t){return console.log("Error in updating player: "+n+" with: "+e,t.response.data)}))}};function G(){var n=Object(u.a)(["\npadding: 0px 10px 4px;\nborder-radius: 5px;\nborder: 1px solid #efc5c5;\n-webkit-box-shadow: 7px 10px 14px -10px rgba(128,128,128,1);\n-moz-box-shadow: 7px 10px 14px -10px rgba(128,128,128,1);\nbox-shadow: 7px 10px 14px -10px rgba(128,128,128,1);\n/* box-shadow: 5px 10px; */\nbackground-color: white;\nfont-weight: 800;\nmargin-bottom:10px; \n"]);return G=function(){return n},n}var M=i.a.div(G()),Q=function(n){var e=n.player,t=Object(a.useState)(e),o=Object(m.a)(t,2),c=o[0],u=o[1];return Object(a.useEffect)((function(){V.updatePlayer(c._id,c)}),[c]),r.a.createElement(M,null,r.a.createElement("div",null,c.name),r.a.createElement(O,{amounts:c,setAmounts:u}),r.a.createElement(K,{amounts:c,setAmounts:u}))};function X(){var n=Object(u.a)(["\n  height: 10px;\n  width: 10px;\n  background-color: black;\n  border-radius: 50%;\n  display: inline-block;\n\n"]);return X=function(){return n},n}function Y(){var n=Object(u.a)(["\nheight: 25%;\n/* margin: auto; */\npadding: 0px 10px;\n\n  div {\n    text-align:center;\n  }\n\n  img {\n    height: auto;\n    width: 100%;\n  }\n"]);return Y=function(){return n},n}function Z(){var n=Object(u.a)(["\ndisplay: flex;\n"]);return Z=function(){return n},n}function $(){var n=Object(u.a)(["\npadding: 0px 10px 4px;\nborder-radius: 5px;\nfont-weight: 800;\nfont-size: 1rem;\nborder: 1px solid #efc5c5;\nbackground-color: white;\n"]);return $=function(){return n},n}var nn=i.a.div($()),en=i.a.div(Z()),tn=i.a.div(Y()),an=i.a.span(X()),rn=function(n){var e,t=n.player;return r.a.createElement(nn,{className:"player-card"},r.a.createElement(an,null)," ",null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:"Aamir Khan",r.a.createElement(en,null,E.map((function(n,e){var a;return r.a.createElement(tn,{key:e},r.a.createElement("img",{src:b[n],alt:n}),r.a.createElement("div",null,null!==(a=null===t||void 0===t?void 0:t[n])&&void 0!==a?a:"?")," ")}))))},on=t(36),cn=t(37),un=function(){function n(){Object(on.a)(this,n)}return Object(cn.a)(n,null,[{key:"setToken",value:function(n){localStorage.setItem("token",n)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"isAuthenticated",value:function(){return!!this.getToken()}},{key:"logout",value:function(){localStorage.removeItem("token")}}]),n}();function ln(){var n=Object(u.a)(["\nbackground-color: #772020;\ncolor: white;\nborder-radius: 3px;\nborder: 1px solid #772020;\npadding: 8px;\nmargin-bottom: 8px;\nfont-weight:700;\nalign-self: flex-end;\n"]);return ln=function(){return n},n}function sn(){var n=Object(u.a)(["\nmargin-bottom: 10px;\n"]);return sn=function(){return n},n}function pn(){var n=Object(u.a)(["\npadding-top: 10px;\nwidth: 95%;\nmargin: auto;\nheight: 100vh;\ndisplay: flex;\nflex-direction: column;\n"]);return pn=function(){return n},n}function dn(){var n=Object(u.a)(["\ndisplay: flex;\nflex-direction: row;\njustify-content: space-between;\n\nimg {\n width: 100px;\n padding: 7px;\n}\n"]);return dn=function(){return n},n}var fn=i.a.div(dn()),mn=i.a.div(pn()),gn=i.a.div(sn()),hn=i.a.button(ln()),bn=function(n){var e=n.history,t=Object(a.useState)(null),o=Object(m.a)(t,2),c=o[0],u=o[1],i=Object(a.useState)(void 0),l=Object(m.a)(i,2),s=l[0],p=l[1],g=function(){var n=Object(f.a)(d.a.mark((function n(e){var t,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.getAllPlayers();case 2:t=n.sent,u(t),a=t.find((function(n){return n._id===e})),p(a);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){var n=un.getToken();g(n);var e=setInterval(Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g(n));case 1:case"end":return e.stop()}}),e)}))),3e3);return function(){return clearInterval(e)}}),[]);return c&&s?r.a.createElement(r.a.Fragment,null,r.a.createElement(mn,null,r.a.createElement(fn,null,r.a.createElement("img",{src:b.logo,alt:"Catan Logo"}),r.a.createElement(hn,{onClick:function(){un.logout(),e.push("/")}},"Log out")),r.a.createElement(Q,{player:s}),c.map((function(n,t){return n.name!==s.name?r.a.createElement(gn,{onClick:function(){return t=n._id,void e.push("/trade?player="+t);var t},key:t},r.a.createElement(rn,{player:n})):void 0})))):null};function vn(){var n=Object(u.a)(["\nfont-size:0.8rem"]);return vn=function(){return n},n}var xn=i.a.div(vn()),yn=function(n){var e=n.history,t=Object(a.useState)(""),o=Object(m.a)(t,2),c=o[0],u=o[1],i=Object(a.useState)(null),l=Object(m.a)(i,2),s=l[0],p=l[1];un.isAuthenticated()&&e.push("/game");var g=function(){var n=Object(f.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!c){n.next=9;break}return n.next=3,V.getPlayerByName(c);case 3:return e=n.sent,n.next=6,V.deletePlayer(null===e||void 0===e?void 0:e._id);case 6:p("The player ".concat(null===e||void 0===e?void 0:e.name," has been delted")),n.next=10;break;case 9:p("Enter a name to delete");case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.createElement("div",null,"Hello, Welcome to Catan! Enter name to login:",r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),V.getPlayerByName(c).then((function(n){n?(un.setToken(n._id),e.push("/game")):p("The name '".concat(c,"' does not exist"))}))}},r.a.createElement("input",{placeholder:"Enter Name",value:c,maxLength:"35",onChange:function(n){return u(n.target.value)}}),r.a.createElement("button",null,"Join game"),s&&r.a.createElement(xn,{style:{color:"white"}},s)),r.a.createElement("button",{onClick:function(){c?V.createPlayer(c).then((function(n){un.setToken(n),e.push("/game")})):p("Enter a name create and join")}},"Create player and Join"),r.a.createElement("button",{onClick:function(){return g()}},"Delete me"))};function En(){var n=Object(u.a)(["\n\nmargin-top: 20px;\ntext-align: center;\nfont-size: 1.1rem;\nfont-weight: 700;\ncolor: white;\ndisplay: flex;\n\n.trade-button {\n  flex-grow: 3;\n  border-radius: 5px;\n  padding: 3px 4px;\n  background-color: #50b350;\n  border: 2px solid #255225;\n}\n\n.cancel-button {\n  flex-grow: 1;\n  margin-right:10px;\n  border-radius: 5px;\n  padding: 3px 4px;\n  background-color: #ce5252;\n  border: 2px solid #671d38;\n}\n"]);return En=function(){return n},n}function wn(){var n=Object(u.a)(["\npadding-top: 10px;\nwidth: 90%;\nmargin: auto;\n\nh2 {\n  margin: 0px;\n}\n\nh3 {\n  margin: 0px;\n  margin-bottom:15px;\n  color:grey;\n}\n\n.player-card {\n  margin-top: 10px;\n}\n"]);return wn=function(){return n},n}function jn(){var n=Object(u.a)(["\npadding-top: 10px;\npadding: 10px;\nbackground-color: white;\nopacity: 100%;\n"]);return jn=function(){return n},n}var On=i.a.div(jn()),kn=i.a.div(wn()),Cn=i.a.div(En()),Nn=function(n){var e=n.history,t=Object(a.useState)({brick:0,grain:0,wood:0,sheep:0,rock:0}),o=Object(m.a)(t,2),c=o[0],u=o[1],i=Object(a.useState)(null),l=Object(m.a)(i,2),s=l[0],p=l[1],h=Object(a.useState)(null),b=Object(m.a)(h,2),v=b[0],x=b[1],y=Object(a.useState)(null),w=Object(m.a)(y,2),j=w[0],k=w[1],C=Object(a.useState)(null),N=Object(m.a)(C,2),S=N[0],A=N[1],P=function(){var n=Object(f.a)(d.a.mark((function n(e,t){var a,r,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.getAllPlayers();case 2:a=n.sent,r=a.find((function(n){return n._id===e})),o=a.find((function(n){return n._id===t})),p(r),x(o);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){var n=window.location.search,e=new URLSearchParams(n).get("player"),t=un.getToken();P(t,e);var a=setInterval(Object(f.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",P(t,e));case 1:case"end":return n.stop()}}),n)}))),3e3);return function(){return clearInterval(a)}}),[]),Object(a.useEffect)((function(){v&&s&&(S||j||(A(v),k(s)))}),[j,S,s,v]);var T=function(){var n=Object(f.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.updatePlayer(j._id,j);case 2:return n.next=4,V.updatePlayer(S._id,S);case 4:e.push("/game");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(c&&s&&v){var n={},e={};E.forEach((function(t){n[t]=s[t]-c[t],e[t]=v[t]+c[t]})),k(Object(g.a)({},s,{},n)),A(Object(g.a)({},v,{},e))}}),[c]),v&&s?r.a.createElement(kn,null,r.a.createElement(On,null,r.a.createElement("h2",null,"Trading"),r.a.createElement("h3",null,"(",s.name," \u2794 ",v.name,")"),r.a.createElement(O,{watchAmounts:j,amounts:c,setAmounts:u})),r.a.createElement(rn,{player:j}),r.a.createElement(rn,{player:S}),r.a.createElement(Cn,null,r.a.createElement("div",{className:"cancel-button",onClick:function(){e.push("/game")}},"Cancel"),r.a.createElement("div",{className:"trade-button",onClick:T},"Trade"))):null};function Sn(){var n=Object(u.a)(["\nwidth:100vw;\nheight:100vh;\nbackground-color:black;\nfont-family: 'Baloo 2';\nbackground-image: url(",");\noverflow:scroll;\nbackground-position: center;\n"]);return Sn=function(){return n},n}var An=i.a.div(Sn(),(function(n){return n.bg})),Pn=function(){return r.a.createElement(An,{className:"App",bg:b.bg},r.a.createElement(l.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:yn}),r.a.createElement(s.a,{exact:!0,path:"/game",component:bn}),r.a.createElement(s.a,{path:"/trade",component:Nn}))))};c.a.render(r.a.createElement(Pn,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.41dfda65.chunk.js.map